{% macro character_image(image_name, alt, size='small', placeholder='?') %}
    {% set sources = image_sources(image_name) %}
    {% if sources %}
    <picture class="face-frame face-frame-{{ size }}">
        {% for source in sources if source.mime != 'image/png' %}
            <source srcset="{{ url_for('static', filename=source.path) }}" type="{{ source.mime }}">
        {% endfor %}
        {% set fallback = sources|last %}
        <img src="{{ url_for('static', filename=fallback.path) }}" alt="{{ alt }}" loading="lazy">
    </picture>
    {% else %}
    <div class="placeholder-img face-frame face-frame-{{ size }}">{{ placeholder }}</div>
    {% endif %}
{% endmacro %}

{% macro balance_badge(status, show_label=False) %}
    {% set icons = {'nerf': '↓', 'buff': '↑', 'rework': '↻'} %}
    {% set labels = {'nerf': 'Нерф', 'buff': 'Бафф', 'rework': 'Изменён'} %}
    {% if status in icons %}
        <span class="balance-badge balance-{{ status }}">
            <span class="balance-badge__icon">{{ icons[status] }}</span>
            {% if show_label %}<span class="balance-badge__label">{{ labels[status] }}</span>{% endif %}
        </span>
    {% endif %}
{% endmacro %}