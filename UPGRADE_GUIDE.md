# Инструкция по применению последних изменений

Следуйте шагам, чтобы корректно обновить рабочее окружение после недавних правок (WebP-изображения, обрезка аватарок, навыки в админке и новое форматирование текста).

## 1. Обновление зависимостей
В проекте не появилось новых библиотек, поэтому дополнительные установки не требуются.

## 2. Резервная копия базы
Сделайте копию текущей `tierlist.db`, чтобы при ошибке можно было откатиться:
```bash
cp tierlist.db tierlist_backup_$(date +%Y-%m-%d).db
```

## 3. Применение миграции
Добавленные поля (класс, фракция, тиры, сложность, описание, изображение) создаются скриптом:
```bash
python migrate_add_columns.py
```
Скрипт безопасно пропускает уже существующие столбцы, поэтому его можно запускать повторно.

## 4. Подготовка изображений
1. Сложите изображения в `static/images/`.
2. Используйте только базовое имя файла (без расширения) в админке.
3. Для каждого персонажа сохраните файлы в WebP (приоритет), а также PNG/JPEG при необходимости. Макрос выбирает доступный WebP и применяет одинаковое кадрирование лица (через `object-position`).

Пример команды конвертации из PNG в WebP (требует `cwebp`):
```bash
cwebp static/images/alice.png -o static/images/alice.webp
```

## 5. Обновление данных персонажей
1. В админке укажите базовое имя изображения (например, `alice` вместо `alice.png`).
2. Заполните поле «Сложность освоения» и новые поля навыков (удары, кулдаун, уровни).
3. Используйте многострочный ввод в «Обзор»/«Краткое резюме» — тексты форматируются с переносами и базовым rich-text стилингом.

После этих шагов можно перезапустить приложение: `python app.py` (или ваш процесс-менеджер).
